<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results</title>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
</head>
<body>
    <h1>Search Results</h1>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='lightthemesearch.css') }}">
  <span id="lightThemeUrl" style="display:none;">{{ url_for('static', filename='lightthemesearch.css') }}</span>
  <span id="darkThemeUrl" style="display:none;">{{ url_for('static', filename='darkthemesearch.css') }}</span>
    <div style="text-align: center; cursor: pointer;" onclick="toggleTheme()">
        &#9728;
    </div>
    <script>
      function toggleTheme() {
          const lightThemeUrl = document.getElementById('lightThemeUrl').textContent;
          const darkThemeUrl = document.getElementById('darkThemeUrl').textContent;
          const currentThemeLink = document.querySelector('link[href*="themesearch.css"]');
          const currentTheme = currentThemeLink.href.includes("lightthemesearch.css") ? "light" : "dark";

          if (currentTheme === "light") {
              currentThemeLink.href = darkThemeUrl;
          } else {
              currentThemeLink.href = lightThemeUrl;
          }
      }
    </script>

  
    <div class="average-price">
        <h2>Average Price: {{ average_price }}</h2>
    </div>



  <div class="container">
    <div class="dropdown">
      <button onclick="toggleDropdownDistance()" class="dropbtn">Distance Statistics</button>
      <div id="dropdown-content-distance" class="dropdown-content">
        <div id="chartContainerDistance" style="height: 370px; width: 100%;"></div>
      </div>
    </div>
    </div>
        <script>
          function toggleDropdownDistance() {
            var dropdownContent = document.getElementById("dropdown-content-distance");
            dropdownContent.classList.toggle("show");
            var chart = new CanvasJS.Chart("chartContainerDistance", {
              animationEnabled: true,
              title: { text: "Seller Distance Distribution" },
              data: [{
                type: "pie",
                startAngle: 240,
                yValueFormatString: "##0\" sellers\"",
                indexLabel: "{label} {y}",
                dataPoints: {{ distance_data_json | safe }}
              }]
            });
            chart.render();
          }

    // Close the dropdown menu if the user clicks outside of it
    window.onclick = function(event) {
      if (!event.target.matches('.dropbtn')) {
        var dropdowns = document.getElementsByClassName("dropdown-content-locations");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    }
    </script>
    <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
    </script>

<!--   <div class="container">
      <div class="dropdown">
        <button onclick="toggleDropdownColors()" class="dropbtn">Color Statistics</button>
        <div id="dropdown-content-colors" class="dropdown-content">
          <div id="chartContainerColors" style="height: 370px; width: 100%;"></div>
        </div>
      </div>
    </div>
    <script>
      function toggleDropdownColors() {
        var dropdownContent = document.getElementById("dropdown-content-colors");
        dropdownContent.classList.toggle("show");
        var chart = new CanvasJS.Chart("chartContainerColors", {
          animationEnabled: true,
          title: {
            text: "Color Distribution"
          },
          data: [{
            type: "pie",
            startAngle: 240,
            yValueFormatString: "##0\" units\"",
            indexLabel: "{label} {y}",
            dataPoints: {{ color_data_json | safe }}
          }]
        });
        chart.render();
      }


  // Close the dropdown menu if the user clicks outside of it
  window.onclick = function(event) {
    if (!event.target.matches('.dropbtn')) {
      var dropdowns = document.getElementsByClassName("dropdown-content-locations");
      var i;
      for (i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        if (openDropdown.classList.contains('show')) {
          openDropdown.classList.remove('show');
        }
      }
    }
  }
  </script>
  <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
  </script>
  
--->
  

  <div class="container">
            <div class="dropdown">
                <button onclick="toggleDropdownMileage()" class="dropbtn">Mileage Statisics</button>
              <div id="dropdown-content-mileage" class="dropdown-content">
                  <div id="chartContainerMileage" style="height: 370px; width: 100%;">                  </div>
              </div>
            </div>
        </div>
        <script>
          function toggleDropdownMileage() {
            var dropdownContent = document.getElementById("dropdown-content-mileage");
            dropdownContent.classList.toggle("show");
            var chart = new CanvasJS.Chart("chartContainerMileage", {
              animationEnabled: true,
              title: { text: "Mileage Distribution" },
              data: [{
                type: "pie",
                startAngle: 240,
                yValueFormatString: "##0\" cars\"",
                indexLabel: "{label} {y}",
                dataPoints: {{ mileage_data_json | safe }}
              }]
            });
            chart.render();
          }

        
    // Close the dropdown menu if the user clicks outside of it
    window.onclick = function(event) {
      if (!event.target.matches('.dropbtn')) {
        var dropdowns = document.getElementsByClassName("dropdown-content-locations");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    }


  

    </script>
    <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
    </script>


    <div class="container">
      <div class="dropdown">
          <button onclick="toggleDropdown()" class="dropbtn">Cars Found</button>
          <div id="dropdown-content" class="dropdown-content">
              {% for car in car_info %}
                  <div class="car">
                      <div>
                          <h2>{{ car.title }}</h2>
                          <p>Mileage: {{ car.mileage }}</p>
                          <p>Price: {{ car.price }}</p>
                          <p>Location: {{ car.location }}</p>
                      </div>
                  </div>
              {% endfor %}
          </div>
      </div>
  </div>
  <script>
      function toggleDropdown() {
          var dropdownContent = document.getElementById("dropdown-content");
          dropdownContent.classList.toggle("show");
      }

      // Close the dropdown menu if the user clicks outside of it
      window.onclick = function(event) {
          if (!event.target.matches('.dropbtn')) {
              var dropdowns = document.getElementsByClassName("dropdown-content");
              var i;
              for (i = 0; i < dropdowns.length; i++) {
                  var openDropdown = dropdowns[i];
                  if (openDropdown.classList.contains('show')) {
                      openDropdown.classList.remove('show');
                  }
              }
          }
      }
  </script>


<!-- <div class="container">
      <div class="dropdown">
          <button onclick="toggleDropdownDealers()" class="dropbtn">Dealer Quantity Statistics</button>
          <div id="dropdown-content-locations" class="dropdown-content">
        </div>
      </div>
</div>

        <div class="container">
          <div class="dropdown">
              <button onclick="toggleDropdownDistances()" class="dropbtn">Distance Statistics</button>
              <div id="dropdown-content-locations" class="dropdown-content">
              </div>
          </div>
        </div> -->
</body>
</html>
